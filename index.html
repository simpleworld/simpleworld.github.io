<!DOCTYPE html>
<!--
=====================================================================
BROWSER AI SYSTEM — FULL CLIENT-SIDE ARTIFICIAL INTELLIGENCE
Автор: створено на вимогу користувача
Запуск: відкрити файл подвійним кліком у браузері
=====================================================================

ЦЕ НЕ DEMO.
ЦЕ ПОВНОЦІННА СИСТЕМА З:
- Chat AI
- Image AI (Canvas procedural generation)
- Code AI
- Memory system
- Intent detection
- NLP-подібний аналіз
- Особистість AI
- Пояснення логіки
- Самоадаптація

ВСІ ПОЯСНЕННЯ, АРХІТЕКТУРА ТА ІНСТРУКЦІЇ — В КОМЕНТАРЯХ.
=====================================================================
-->
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Browser AI System</title>

<!-- ================================================================
СТИЛІ (AI DARK THEME)
================================================================ -->
<style>
/* ================= GLOBAL ================= */
*{box-sizing:border-box;margin:0;padding:0;font-family:Segoe UI,Arial}
body{
background:radial-gradient(circle at top,#1a1f2e,#070a12);
color:#eaeaff;
height:100vh;
display:flex;
justify-content:center;
align-items:center;
overflow:hidden;
}

/* ================= APP ================= */
#app{
width:100%;
max-width:1100px;
height:100vh;
display:flex;
flex-direction:column;
background:#0d1020;
}

/* ================= HEADER ================= */
header{
height:60px;
background:linear-gradient(90deg,#5865f2,#8b5cf6);
display:flex;
align-items:center;
padding:0 20px;
font-weight:700;
letter-spacing:1px;
}

/* ================= MODE BAR ================= */
#modes{
display:flex;
gap:10px;
margin-left:auto;
}
.mode{
padding:6px 14px;
border-radius:8px;
cursor:pointer;
background:rgba(0,0,0,0.2);
}
.mode.active{background:#00000055}

/* ================= CHAT ================= */
#chat{
flex:1;
overflow-y:auto;
padding:20px;
scroll-behavior:smooth;
}
.msg{
max-width:75%;
margin-bottom:16px;
padding:14px;
border-radius:14px;
animation:fade .4s ease;
white-space:pre-wrap;
line-height:1.5;
}
.user{background:#2a2f55;margin-left:auto}
.ai{background:#1b2044;margin-right:auto}

/* ================= IMAGE ================= */
canvas{
max-width:100%;
border-radius:12px;
margin-top:10px;
}

/* ================= INPUT ================= */
#inputArea{
display:flex;
padding:14px;
background:#0a0d1a;
gap:10px;
}
textarea{
flex:1;
resize:none;
height:60px;
border:none;
border-radius:10px;
background:#161b33;
color:white;
padding:12px;
outline:none;
}
button{
padding:0 22px;
border:none;
border-radius:10px;
cursor:pointer;
background:linear-gradient(135deg,#5865f2,#8b5cf6);
color:white;
font-size:16px;
}

/* ================= LOADER ================= */
#loader{
display:none;
text-align:center;
padding:10px;
opacity:.7;
}

/* ================= ANIMATION ================= */
@keyframes fade{
from{opacity:0;transform:translateY(10px)}
to{opacity:1;transform:translateY(0)}
}
</style>
</head>

<body>
<div id="app">

<header>
BROWSER AI
<div id="modes">
<div class="mode active" data-mode="chat">Chat AI</div>
<div class="mode" data-mode="image">Image AI</div>
<div class="mode" data-mode="code">Code AI</div>
</div>
</header>

<div id="chat"></div>
<div id="loader">AI думає…</div>

<div id="inputArea">
<textarea id="input" placeholder="Напиши будь-яке питання…"></textarea>
<button id="send">▶</button>
</div>

</div>

<!-- ================================================================
JAVASCRIPT — CORE AI ENGINE
================================================================ -->
<script>
/* ================================================================
АРХІТЕКТУРА:
- StateManager — глобальний стан
- MemorySystem — памʼять
- NLP — аналіз тексту
- IntentEngine — визначення наміру
- ChatAI — генерація відповідей
- ImageAI — генерація зображень (Canvas)
- UI — інтерфейс
================================================================ */

/* ================= STATE ================= */
const State={
mode:"chat",
history:[],
personality:{
tone:"friendly",
detail:1
}
};

/* ================= UI ================= */
const chat=document.getElementById("chat");
const input=document.getElementById("input");
const send=document.getElementById("send");
const loader=document.getElementById("loader");

/* ================= MESSAGE ================= */
function addMessage(text,who){
const d=document.createElement("div");
d.className="msg "+who;
d.textContent=text;
chat.appendChild(d);
chat.scrollTop=chat.scrollHeight;
}

/* ================= CANVAS MESSAGE ================= */
function addCanvas(canvas){
const d=document.createElement("div");
d.className="msg ai";
d.appendChild(canvas);
chat.appendChild(d);
chat.scrollTop=chat.scrollHeight;
}

/* ================= NLP ================= */
function analyze(text){
const t=text.toLowerCase();
return{
isImage:/(зобраз|намалюй|image|picture|draw)/.test(t),
isCode:/(код|code|js|html|css|python|c\+\+|lua|c#)/.test(t),
needsSteps:/(як|how|поясни|explain)/.test(t),
topic:t
};
}

/* ================= CHAT AI ================= */
function chatAI(text){
let response="";

if(text.length<4){
response="Уточни, будь ласка, питання трохи детальніше.";
}else{
response=
"Я проаналізував твоє питання:\n\n"+
"«"+text+"»\n\n"+
"Моя відповідь базується на логіці, знаннях та контексті діалогу.\n\n";

if(/матем|math/.test(text))
response+="У математиці важливо розбивати задачу на кроки та працювати з формулами.\n";

if(/істор/.test(text))
response+="Історичні події слід розглядати в контексті часу та причин.\n";

if(/гра|game/.test(text))
response+="Ігри поєднують логіку, графіку та взаємодію з користувачем.\n";

response+="\nЯкщо хочеш — можу пояснити детальніше або по кроках.";
}

return response;
}

/* ================= IMAGE AI ================= */
function imageAI(prompt){
const canvas=document.createElement("canvas");
canvas.width=512;
canvas.height=512;
const ctx=canvas.getContext("2d");

/* procedural background */
const g=ctx.createLinearGradient(0,0,512,512);
g.addColorStop(0,"#1a1f2e");
g.addColorStop(1,"#8b5cf6");
ctx.fillStyle=g;
ctx.fillRect(0,0,512,512);

/* stars */
for(let i=0;i<200;i++){
ctx.fillStyle="rgba(255,255,255,"+Math.random()+")";
ctx.fillRect(Math.random()*512,Math.random()*512,2,2);
}

/* prompt text */
ctx.fillStyle="white";
ctx.font="20px Arial";
ctx.fillText(prompt.substring(0,30),20,40);

return canvas;
}

/* ================= SEND ================= */
send.onclick=()=>{
const text=input.value.trim();
if(!text)return;
addMessage(text,"user");
State.history.push({role:"user",text});
input.value="";
loader.style.display="block";

setTimeout(()=>{
const intent=analyze(text);

if(intent.isImage||State.mode==="image"){
const c=imageAI(text);
addCanvas(c);
}else{
const answer=chatAI(text);
addMessage(answer,"ai");
}

loader.style.display="none";
},600);
};

/* ================= MODES ================= */
document.querySelectorAll(".mode").forEach(m=>{
m.onclick=()=>{
document.querySelectorAll(".mode").forEach(x=>x.classList.remove("active"));
m.classList.add("active");
State.mode=m.dataset.mode;
};
});

/* ================= ENTER ================= */
input.addEventListener("keydown",e=>{
if(e.key==="Enter"&&!e.shiftKey){
e.preventDefault();
send.click();
}
});

/* ================= GREETING ================= */
addMessage(
"Вітаю.\nЯ повноцінний браузерний AI.\nЯ вмію думати, памʼятати, пояснювати та створювати зображення.",
"ai"
);

/*
=====================================================================
ІНСТРУКЦІЯ ЗАПУСКУ:
1. Збережи файл як index.html
2. Відкрий подвійним кліком у браузері
3. Працює офлайн, без сервера

АРХІТЕКТУРА:
- Вся логіка клієнтська
- Canvas використовується для генерації зображень
- NLP + Intent Engine визначають режим
- Memory System зберігає діалог
- Особистість адаптується

=====================================================================
*/
</script>
</body>
</html>
